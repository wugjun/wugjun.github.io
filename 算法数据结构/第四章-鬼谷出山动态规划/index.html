<!doctype html><html class=no-js lang=zh-cn><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>第四章：鬼谷出山，动态规划</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="算法数据结构"><meta name=generator content="Hugo 0.152.2"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/quiz.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title=补漏砖匠 rel=home><div class=logo__title>补漏砖匠</div><div class=logo__tagline>独钓寒江雪，为有暗香来。</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-%E5%89%91%E6%B3%95%E7%AF%87/>编程语言</a></li><li class=menu__item><a class=menu__link href=/%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2/%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2-%E6%9C%BA%E5%85%B3%E7%AF%87/>运维部署</a></li><li class=menu__item><a class=menu__link href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A3%8B%E8%B0%B1%E7%AF%87/>算法数据结构</a></li><li class=menu__item><a class=menu__link href=/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84-%E5%85%B5%E6%B3%95%E7%AF%87/>后端架构</a></li><li class=menu__item><a class=menu__link href=/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87-%E6%B3%95%E5%AE%9D%E7%AF%87/>工具效率</a></li><li class=menu__item><a class=menu__link href=/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E7%94%BB%E5%8D%B7%E7%AF%87/>前端开发</a></li><li class=menu__item><a class=menu__link href=/%E5%BC%80%E6%BA%90%E6%96%87%E6%A1%A3/%E5%BC%80%E6%BA%90%E6%96%87%E6%A1%A3-%E5%85%B8%E7%B1%8D%E7%AF%87/>开源文档</a></li><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-AI%E5%9C%A8%E7%BA%BF%E6%B5%8B%E8%AF%95/>JAVA在线测试</a></li><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-%E5%9C%A8%E7%BA%BF%E7%AD%94%E9%A2%98%E7%A4%BA%E4%BE%8B/>在线答题</a></li><li class=menu__item><a class=menu__link href=/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87-DeepSeek%E6%B5%81%E5%BC%8F%E8%81%8A%E5%A4%A9/>DeepSeek</a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>第四章：鬼谷出山，动态规划</h1><p class=post__lead>一眼春秋，望穿风云。</p><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8L11.36 11.36l.64-1.04-3.6-2.1600003z"/></svg>
<time class=meta__text datetime=2025-12-14T00:00:00>December 14, 2025</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg>
<span class=meta__text><a class=meta__link href=/categories/%e7%ae%97%e6%b3%95%e4%b8%80%e7%bb%9f%e6%98%a5%e7%a7%8b rel=category>算法一统春秋</a></span></div></div></header><div class="post__toc toc"><div class=toc__title>页面内容</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#第一幕鬼谷子出山魏国请圣><strong>第一幕：鬼谷子出山，魏国请圣</strong></a></li><li><a href=#第二幕齐国点兵背包难题><strong>第二幕：齐国点兵，背包难题</strong></a></li><li><a href=#第三幕马陵道上最长公共子序列><strong>第三幕：马陵道上，最长公共子序列</strong></a></li><li><a href=#第四幕多维背包杀阵><strong>第四幕：多维背包杀阵</strong></a></li><li><a href=#第五幕鬼谷真身状态压缩dp><strong>第五幕：鬼谷真身，状态压缩DP</strong></a></li><li><a href=#第六幕军情突变秦国背刺><strong>第六幕：军情突变，秦国背刺</strong></a></li><li><a href=#第七幕递归咒爆发芈月舍身><strong>第七幕：递归咒爆发，芈月舍身</strong></a></li><li><a href=#第八幕楚国之行三道难题><strong>第八幕：楚国之行，三道难题</strong></a></li><li><a href=#尾声三军合围最终决战><strong>尾声：三军合围，最终决战</strong></a></li></ul></nav></div></div><div class="content post__content clearfix"><ul><li><a href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%9B%BE%E8%AE%BA%E6%9D%80%E5%B1%80%E4%B8%B4%E6%B7%84%E9%A3%8E%E4%BA%91/>第三章-图论杀局，临淄风云</a>
<a href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A3%8B%E8%B0%B1%E7%AF%87/>◀ 返回</a></li></ul><h1 id=第四章鬼谷出山动态规划><strong>第四章：鬼谷出山，动态规划</strong></h1><hr><h2 id=第一幕鬼谷子出山魏国请圣><strong>第一幕：鬼谷子出山，魏国请圣</strong></h2><p>魏国，大梁城，云梦算法阁。</p><p>阁高九层，飞檐斗拱，最顶层终年云雾缭绕，寻常人不得入。传闻此阁中住着一位算法圣人——<strong>鬼谷子</strong>，已闭关三十年，参悟《鬼谷算法》最后一重。</p><p>今日，云梦阁前，魏惠王亲率百官跪候。</p><p>“求鬼谷圣人出山，救魏国于危难！”</p><p>魏惠王三拜九叩，身后庞涓伏地不起，额头抵着青石，血迹斑斑。</p><p>“弟子无能，败于齐国王子姬玄，损魏国威名，请师尊责罚！”</p><p>良久，阁顶云雾散开一道缝隙，传来苍老声音：</p><p>“姬玄&mldr;得《九章算法》第一卷，破你三阵？”</p><p>“是。”
“用何法破你‘最小割’阵？”
“他&mldr;他临时增设虚节点，绕过最小割。”</p><p>阁顶沉默片刻，忽有笑声：“倒是个聪明孩子。进来。”</p><p>庞涓大喜，连滚爬入阁中。</p><p>顶层无桌无椅，只有满地算法符文流动如河。中央蒲团上，坐着一位麻衣老者，须发皆白，但双目清澈如婴童——正是鬼谷子。</p><p>“你败得不冤。”鬼谷子缓缓道，“你学的是‘死算法’，他用的却是‘活思维’。”</p><p>“求师尊指点！”
“算法之道，分三重境界。”鬼谷子伸出一指，“第一重：记算法，知其然；第二重：懂原理，知其所以然；第三重：<strong>无算法</strong>，万物皆可为算法。”</p><p>他看向西方，目光似穿透千里：“这个姬玄&mldr;已摸到第三重门槛。”</p><p>庞涓骇然：“他才多大？！”
“天赋，与年纪无关。”鬼谷子起身，“也罢，老夫闭关三十载，也该活动活动筋骨了。”</p><p>他袖袍一挥，地面符文汇聚成一张<strong>中原地图</strong>。</p><p>“齐伐魏，必走两条路：一为西线经桂陵，二为北线过马陵。”鬼谷子指点地图，“你可知，姬玄会走哪条？”</p><p>庞涓沉吟：“按常理，应走桂陵，地势平缓，粮草易运。”
“所以他不走桂陵。”鬼谷子微笑，“他会走马陵。”</p><p>“为何？马陵道险，易中埋伏！”
“正因易中埋伏，才要走。”鬼谷子眼中闪过精光，“他已猜到我会在桂陵布阵，故而反其道行之。此子&mldr;善用‘逆向思维’。”</p><p>庞涓恍然：“那我们在马陵设伏？”
“不。”鬼谷子摇头，“我们在<strong>两条路都设伏</strong>。”</p><p>他指尖在地图上划出复杂路径：“此乃‘动态规划伏击网’——无论他走哪条路，我们都能以最优兵力调度应对。”</p><hr><h2 id=第二幕齐国点兵背包难题><strong>第二幕：齐国点兵，背包难题</strong></h2><p>齐国，临淄，校场。</p><p>十万大军列阵，旌旗蔽日。姬玄一身银甲，腰悬玉笔，立于点将台上。身旁芈月白衣胜雪，手持楚国“凤鸣算盘”。</p><p>田忌呈上军册：“殿下，粮草已备：粟米三十万石，草料二十万车，箭矢一百万支&mldr;但运输车辆有限，只能载重八万石。”</p><p>姬玄皱眉：“十万大军，日耗粟米五千石，三十万石仅够六十日。若战事拖延&mldr;”</p><p>“还有更大问题。”后勤官苦脸，“车辆还要运箭矢、帐篷、药材&mldr;如何分配载重，才能最大化战力？”</p><p>这分明是经典的<strong>背包问题</strong>（Knapsack Problem）！</p><p>物品：粮草、箭矢、帐篷、药材&mldr;
重量：各不相同
价值：对战斗力的贡献度不同
背包容量：车辆总载重八万石</p><p>需选择物品组合，使总价值最大。</p><p>台下将领议论纷纷：
“当然先运粮草！没饭吃打什么仗？”
“箭矢重要！守城进攻都要用！”
“帐篷呢？将士露宿生病怎办？”</p><p>姬玄抬手，全场静下。</p><p>“此乃‘多维背包问题’，”他朗声道，“不是简单取舍，而要<strong>动态规划优化</strong>。”</p><p>他在空中画出表格：</p><pre tabindex=0><code>定义 dp[i][w]：前i种物品，总重量不超过w时的最大价值
状态转移：
dp[i][w] = max(
    dp[i-1][w],                       // 不选第i种
    dp[i-1][w-weight[i]] + value[i]   // 选第i种
)
</code></pre><p>但现实更复杂——物品分<strong>类别</strong>：粮草是消耗品，随时间减少价值；箭矢可回收部分；帐篷多人共用&mldr;</p><p>芈月轻声道：“可用‘分组背包’思路，每类物品内选最优组合，再类间优化。”</p><p>姬玄点头，二人联手推演。</p><p>半炷香后，方案出炉：</p><pre tabindex=0><code>最优分配：
1. 粮草：五万石（保障百日）
2. 箭矢：两万石（三十万支，可回收）
3. 帐篷：五千石（轻便型，五人一帐）
4. 药材：五千石（精简品种）
5. 机动：预留一万石载重，沿途补给
</code></pre><p>众将叹服。</p><p>但姬玄心中仍有隐忧——这个最优解，是基于<strong>已知信息</strong>。若魏国破坏粮道，或天气突变&mldr;价值函数就会变化。</p><p>需要<strong>动态调整</strong>的算法。</p><p>“田将军，”姬玄下令，“分三批运输，每批路线不同，且每批都含各类物资。如此，即使一路被劫，另两路也能支撑。”</p><p>这是<strong>分布式背包</strong>的思路。</p><p>田忌领命而去。</p><hr><h2 id=第三幕马陵道上最长公共子序列><strong>第三幕：马陵道上，最长公共子序列</strong></h2><p>三日后，大军开拔。</p><p>姬玄果然选择了马陵道——山路崎岖，但可直插魏国腹地。</p><p>行军第三日，先锋截获魏国密探，搜出一份<strong>加密军情</strong>。</p><p>密文是两串数字：</p><pre tabindex=0><code>序列A：3 1 4 1 5 9 2 6 5 3
序列B：3 4 5 9 2 6 5 3 8 9
</code></pre><p>芈月细看：“这是&mldr;圆周率π和自然常数e的数字序列？但被打乱了。”
“不，”姬玄凝神，“这是**最长公共子序列（LCS）**的载体。”</p><p>他想起前世见过的情报加密法：将真实信息藏在两个序列的<strong>公共子序列</strong>中。</p><p>“破译需要找到A和B的最长公共子序列&mldr;”姬玄在地上推算，“动态规划经典问题。”</p><p>构建二维表dp[i][j]，表示A前i个字符和B前j个字符的LCS长度。</p><p>转移方程：</p><pre tabindex=0><code>if A[i] == B[j]:
    dp[i][j] = dp[i-1][j-1] + 1
else:
    dp[i][j] = max(dp[i-1][j], dp[i][j-1])
</code></pre><p>芈月同步心算，两人配合，很快算出LCS：</p><p><code>3 4 5 9 2 6 5 3</code></p><p>“这是数字序列，对应什么？”田忌疑惑。</p><p>姬玄看向芈月：“楚国有种‘数字密码本’，每数字对应一字&mldr;”</p><p>芈月从怀中取出一卷帛书——正是楚国军用密码本。</p><p>对照翻译：</p><p><code>3 4 5 9 2 6 5 3</code>
<code>桂 陵 有 伏 勿 入 转 向</code></p><p>“桂陵有伏！”田忌大惊，“我们走的是马陵，那&mldr;”</p><p>姬玄脸色一变：“不好！这是<strong>误导</strong>！魏国知道我们能破译，故意让我们以为桂陵有伏，实则伏兵在&mldr;”</p><p>话音未落！</p><p>“轰——！”</p><p>两侧山崖滚石如雨！</p><p>“埋伏！是马陵！”田忌大吼，“结阵！”</p><p>但为时已晚，魏军如蚁群涌出，领头之人——正是庞涓！</p><p>“姬玄！今日就是你的死期！”</p><hr><h2 id=第四幕多维背包杀阵><strong>第四幕：多维背包杀阵</strong></h2><p>庞涓立于山巅，身后站着八名黑袍阵师，各持算筹，布下的是<strong>改良版背包杀阵</strong>！</p><p>阵法显形：空中浮现无数光球，每个光球代表一种“攻击资源”——箭雨、滚石、毒雾、地刺&mldr;</p><p>每个光球有重量（消耗灵力）和价值（杀伤力）。</p><p>阵法规则：庞涓每轮有固定“灵力容量”，需选择光球组合，最大化杀伤力。</p><p>这正是<strong>动态规划背包问题</strong>，但庞涓将其化为杀阵！</p><p>“姬玄，”庞涓狞笑，“你不是善解背包问题吗？那就解解这个<strong>实时动态背包</strong>！”</p><p>第一轮，庞涓选择：箭雨（重3，伤5）+滚石（重5，伤8）=总伤13</p><p>箭石齐发！齐军死伤数百。</p><p>姬玄急令：“举盾！分散！”</p><p>他同时大脑飞转：要破此阵，必须<strong>预测庞涓下一轮选择</strong>，提前防御。</p><p>但庞涓不是死算法——他会根据齐军阵型调整价值判断。</p><p>“这是<strong>对抗性动态规划</strong>&mldr;”姬玄额头见汗，“我需要建立庞涓的决策模型&mldr;”</p><p>芈月喊道：“用<strong>博弈树</strong>！假设庞涓是理性人，每轮选当前最优&mldr;”</p><p>“不，”姬玄摇头，“庞涓背后有鬼谷子，决策可能更深远——会为后续轮次牺牲当前收益。”</p><p>这是<strong>带时间折扣的背包问题</strong>！</p><p>姬玄闭目，全力计算：</p><p>设总轮数T=10，每轮容量C=10
光球种类K=8，每轮价值可能变化
庞涓目标：最大化 Σ β^t * V_t （β为折扣因子）</p><p>需要逆向推导：从最后一轮开始，往前计算最优策略。</p><p>“给我三息！”姬玄玉笔狂舞。</p><p>芈月则率亲卫结阵死守。</p><p>三息后，姬玄睁眼：“下一轮，他会选毒雾（重4，伤6）+地刺（重6，伤9）！因为下一轮箭雨价值会下降！”</p><p>“防毒！垫厚革！”</p><p>果然，第二轮庞涓选了毒雾+地刺。</p><p>但齐军已提前防护，伤亡大减。</p><p>庞涓脸色一沉：“你能预测一轮，能预测十轮吗？”</p><p>他改变策略——开始<strong>随机化选择</strong>！用一定概率混合不同组合，让姬玄无法确定预测。</p><p>“这是<strong>随机化动态规划</strong>&mldr;”姬玄压力骤增，“需要计算混合策略的期望值&mldr;”</p><p>计算量暴涨！</p><p>就在这时——</p><p>“姬玄，看这个。”</p><p>芈月递来一枚玉佩，上面有楚国秘传算法：“<strong>蒙特卡洛树搜索（MCTS）</strong>，可近似解大规模随机动态规划！”</p><p>姬玄大喜，立即应用：</p><ol><li><strong>选择</strong>：从根节点（当前状态）开始，用UCB公式选子节点</li><li><strong>扩展</strong>：扩展新节点（庞涓的可能选择）</li><li><strong>模拟</strong>：随机模拟后续轮次</li><li><strong>回溯</strong>：更新节点统计量</li></ol><p>虽不精确，但足够指导防御！</p><p>两人联手，姬玄计算主干，芈月并行模拟，硬是在庞涓的随机攻击中，护住主力。</p><p>十轮过后，齐军伤亡三千，但未溃散。</p><p>庞涓灵力将尽，咬牙道：“师尊说得对&mldr;你果然难缠。但接下来&mldr;是真正的杀招！”</p><p>他捏碎一枚玉符。</p><p>天地变色！</p><hr><h2 id=第五幕鬼谷真身状态压缩dp><strong>第五幕：鬼谷真身，状态压缩DP</strong></h2><p>云层破开，一道麻衣身影缓缓降落。</p><p>鬼谷子真身降临！</p><p>他并未看庞涓，直接看向姬玄：“小娃娃，能破我徒弟十轮攻击，算你有些本事。”</p><p>姬玄持笔行礼：“晚辈姬玄，见过鬼谷前辈。”
“不必客气。”鬼谷子微笑，“老夫此来，是为杀你。”</p><p>他说得轻描淡写，却让所有人脊背发寒。</p><p>鬼谷子袖袍一挥，地面升起<strong>八十一盏铜灯</strong>，每灯有明暗两种状态。</p><p>“此阵名‘状态压缩DP杀局’。”鬼谷子道，“八十一盏灯，代表八十一个变量，每灯状态0或1，总状态数2^81——你穷举不了。”</p><p>姬玄凝神：“前辈要晚辈解何题？”
“很简单，”鬼谷子指向灯阵，“找出一种明暗模式，使得相邻三灯中，至少两灯明，且总明灯数最多。”</p><p>这是<strong>约束优化问题</strong>，但规模太大。</p><p>“给你三炷香，”鬼谷子坐下，“解出，我退兵；解不出，十万齐军&mldr;尽葬于此。”</p><p>田忌怒吼：“鬼谷子！你以大欺小！”
“战争，本就不公平。”鬼谷子闭目。</p><p>姬玄盯着灯阵。</p><p>2^81 ≈ 2.4e24，天文数字，穷举不可能。</p><p>必须用<strong>状态压缩动态规划（状压DP）</strong>！</p><p>将每行灯的状态压缩为一个二进制数，行间转移时检查约束。</p><p>但八十一盏，若是9×9方阵，每行9盏，状态数2^9=512，可行！</p><p>“前辈，”姬玄忽然道，“这八十一盏灯，是9行9列，对吗？”
鬼谷子睁眼，闪过一丝讶异：“你如何知道？”
“因为81=9²，且您布阵时，暗中按九宫方位。”姬玄道，“所以，这是<strong>二维状压DP</strong>。”</p><p>他快速建模：</p><p>设dp[i][mask]：处理到第i行，当前行状态为mask时的最大明灯数。</p><p>转移需满足：</p><ol><li>行内约束：mask自身不能有连续三暗</li><li>行间约束：mask与上一行mask_prev，任意列上两行不能都暗（至少一明）</li></ol><p>“但还有‘相邻三灯’约束&mldr;”芈月提醒，“是三维相邻：上下左右？”
“应是包括对角。”姬玄推演，“那就是<strong>三维邻域约束</strong>，需同时检查当前行、上一行、上上行&mldr;”</p><p>复杂度激增！</p><p>但姬玄发现一个关键：约束本质是<strong>局部检查</strong>，可预处理所有合法状态。</p><p>他分三步：</p><ol><li>预处理所有合法行状态（512中筛选）</li><li>预处理行间合法转移对</li><li>动态规划计算最优</li></ol><p>半炷香后，姬玄开始解。</p><p>一炷香时，他已推演到第五行。</p><p>两炷香时，抵达第九行。</p><p>最后一炷香燃尽前——</p><p>“找到了！”姬玄玉笔一点，八十一盏灯按特定顺序明灭！</p><p>最优解：<strong>五十三盏明灯</strong>！</p><p>鬼谷子凝视灯阵良久，忽然大笑：</p><p>“好！好！好！”</p><p>他连说三个好字，起身：“三十年未见如此天赋。姬玄，你过关了。”</p><p>庞涓急道：“师尊！不能放他走！”
“闭嘴。”鬼谷子冷声道，“算法之道，言出必践。我说过解出就退兵。”</p><p>他看向姬玄：“不过&mldr;这只是开始。下一阵，在魏都大梁等你。”</p><p>说罢，袖袍一卷，带庞涓及魏军消失。</p><hr><h2 id=第六幕军情突变秦国背刺><strong>第六幕：军情突变，秦国背刺</strong></h2><p>马陵伏击虽退，但齐军伤亡不小，休整三日。</p><p>期间姬玄收到两份急报：</p><p>第一份来自临淄：齐王身体反复，递归毒似有余孽未清。</p><p>第二份更致命——<strong>秦国出兵了</strong>！</p><p>秦军十万，由太子嬴驷统领，以“调解齐魏争端”为名，兵分两路：
一路直扑齐国西境；
一路绕道赵国，意图断齐军归路！</p><p>“嬴驷&mldr;”姬玄握紧军报，“他在迷宫败于我手，这是报复。”</p><p>田忌焦急：“殿下，我们前有魏国，后有秦国，若赵国也被秦拉拢&mldr;三面受敌！”</p><p>芈月却道：“未必。我楚国有密报，赵王不愿掺和，但秦以‘算法共享’为诱，赵国有些动摇。”</p><p>“算法共享？”姬玄皱眉。
“秦国声称，若列国共抗齐，愿公开《秦法算经》前三卷。”</p><p>姬玄冷笑：“嬴驷倒是舍得。但我们也有筹码——《九章算法》第一卷，我已公开基础篇。”</p><p>“不够，”芈月摇头，“各国要的是<strong>进阶算法</strong>，特别是&mldr;军阵算法。”</p><p>姬玄沉思良久，忽然问：“公主，楚王那里&mldr;”
“我已传信父王，”芈月轻声道，“楚国可出兵五万，从南线牵制秦国。但&mldr;父王有条件。”</p><p>“什么条件？”
“一、你需亲自赴郢都，解楚王三道算法难题；二、&mldr;”芈月脸微红，“公开我们的婚约。”</p><p>姬玄一愣。</p><p>田忌等将领却大喜：“殿下！此乃良机！得楚国相助，可破秦魏之围！”</p><p>但姬玄知道没那么简单——楚王的三道难题，必是生死考验。</p><p>“我去。”姬玄决然道，“但大军不能停，继续伐魏。田将军，你率主力佯攻大梁，拖住魏军。我轻骑赴楚，最快半月回。”</p><p>“殿下不可！”田忌反对，“您是主帅，怎能离军？且途中危险&mldr;”</p><p>“正因危险，才要快。”姬玄看向芈月，“公主，你随我回楚吗？”
芈月点头：“我带路，有楚国秘道，可缩短路程。”</p><p>计划定下：姬玄、芈月带百名亲卫赴楚；田忌率军继续进逼大梁。</p><p>但就在当夜，异变再生。</p><hr><h2 id=第七幕递归咒爆发芈月舍身><strong>第七幕：递归咒爆发，芈月舍身</strong></h2><p>子时，姬玄正在推演赴楚路线，忽听隔壁芈月帐中传来痛呼！</p><p>冲入帐内，只见芈月倒在地上，胸前浮现<strong>黑色递归纹路</strong>——竟与齐王所中类似！</p><p>“月儿！”姬玄扶起她。
芈月脸色惨白：“是&mldr;是邹忌&mldr;他临死前，在我身上下了递归咒&mldr;现在发作了&mldr;”</p><p>姬玄神识探查，果然发现芈月经脉中有递归代码，但比齐王的更隐蔽、更恶毒！</p><p>“此咒触发条件&mldr;”姬玄脸色大变，“是情绪波动！你对我动情越深，递归越深！”</p><p>这是<strong>情感绑定递归咒</strong>，专门针对相爱之人！</p><p>芈月苦笑：“邹忌&mldr;好狠&mldr;他知道你会救我父王，所以在我身上下咒&mldr;你若救我，会耗尽全力；若不救&mldr;你会内疚一生。”</p><p>姬玄红眼：“我一定会救你！”</p><p>但探查后发现，此咒与芈月心脉绑定，强行破解会伤她性命。</p><p>只能<strong>在递归中解</strong>——进入递归幻境，找到终止条件。</p><p>“田将军！”姬玄下令，“全军警戒，我要为公主驱咒，不得打扰！”</p><p>“殿下，大战在即，您若消耗过度&mldr;”
“执行命令！”</p><p>姬玄扶芈月盘坐，两人四掌相对，神识进入递归幻境。</p><hr><p>幻境中，是无尽递归迷宫。</p><p>每个转角都出现芈月的记忆片段：
幼年学算法、楚国宫廷争斗、第一次见姬玄、迷宫并肩、马陵共战&mldr;</p><p>每个片段都是递归调用，一层套一层。</p><p>姬玄在迷宫中疾走，寻找<strong>递归出口</strong>。</p><p>他很快发现规律：每个记忆片段都有个“情感值”，正情感加深递归，负情感则减弱。</p><p>“所以&mldr;要让她回忆痛苦之事？”姬玄犹豫，“但那会伤她&mldr;”</p><p>正迟疑时，幻境深处传来芈月的声音：</p><p>“姬玄&mldr;不要顾忌&mldr;破咒要紧&mldr;”</p><p>姬玄咬牙，开始引导芈月回忆：</p><ul><li>母亲早逝的痛苦</li><li>兄弟争权的残酷</li><li>作为公主的束缚</li><li>&mldr;</li></ul><p>递归深度果然减缓。</p><p>但芈月气息也越来越弱——以痛苦压制递归，如同饮鸩止渴。</p><p>“不对！”姬玄猛然醒悟，“邹忌的陷阱就在于此！若我继续引导痛苦，月儿心神会崩溃！”</p><p>必须另寻他法。</p><p>“递归咒&mldr;本质是算法。”姬玄冷静下来，“只要是算法，就有逻辑，就可破解。”</p><p>他仔细分析递归结构，发现一个隐藏规律：</p><p><strong>每次递归调用，情感值都会乘以一个系数β（0.9）</strong></p><p>这意味着，递归深度越深，情感影响越小，但总有一个极限值。</p><p>“这是<strong>几何级数递归</strong>！”姬玄眼睛一亮，“总和有极限：S = a/(1-β)！”</p><p>只要算出初始情感值a，就能知道总递归深度！</p><p>他开始在幻境中收集数据，计算a值。</p><p>一炷香&mldr;
两炷香&mldr;</p><p>“算出来了！”姬玄在迷宫中心找到<strong>递归基座</strong>——一枚黑色符文。</p><p>他玉笔一点，注入计算出的极限值：</p><p>“以情为始，以数为终——<strong>破</strong>！”</p><p>符文炸裂，递归幻境崩塌。</p><p>现实世界，两人同时吐血。</p><p>但芈月胸前黑纹，开始消退。</p><p>“成功了&mldr;”姬玄虚弱道。</p><p>芈月缓缓睁眼，泪光闪烁：“你&mldr;你又救我一次&mldr;”</p><p>“因为&mldr;”姬玄微笑，“你值得。”</p><p>两人相拥，帐外月光如水。</p><hr><h2 id=第八幕楚国之行三道难题><strong>第八幕：楚国之行，三道难题</strong></h2><p>五日后，楚国郢都。</p><p>楚王宫，算法殿。</p><p>楚王熊商高坐王位，左右分立楚国算法宗师。芈月站于殿中，姬玄跪拜行礼。</p><p>“齐王子姬玄，”楚王声音威严，“月儿传信，说你算法通神，且与她两情相悦。但本王不能凭一面之词将公主许你，更不能轻易出兵助齐。”</p><p>他竖起三根手指：“三道题。解出，楚齐联姻，楚军助齐；解不出&mldr;你自行离去，月儿永留楚国。”</p><p>“晚辈愿试。”
“第一题，”楚王挥手，“<strong>楚粮调度</strong>。”</p><p>场景浮现：楚国七大粮仓，需调粮至三处边关，每仓储量、每关需求、道路运力皆不同，且部分道路有盗匪（损耗）。</p><p>“要求：最小化总损耗，且保证边关粮草不缺。”</p><p>这是<strong>最小费用最大流问题</strong>！</p><p>姬玄快速建模：
源点：七粮仓（供应量）
汇点：三边关（需求量）
中间：转运节点
边：道路（容量、单位损耗）</p><p>算法：在最大流基础上，找费用最小的增广路径。</p><p>他用<strong>连续最短增广路算法（SSA）</strong>——每次用Bellman-Ford找最小费用路径，增广，直至满足需求。</p><p>半炷香，解出最优方案。</p><p>楚王点头：“第二题——<strong>楚宫侍卫排班</strong>。”</p><p>宫廷侍卫三百人，需排一月班次，约束极多：</p><ul><li>每人每周休二日</li><li>每日每班需特定人数</li><li>老手新手需搭配</li><li>某些人不能同班（有仇）</li><li>某些人必须同班（搭档）</li><li>最大化侍卫满意度</li></ul><p>这是<strong>约束满足问题（CSP）+ 优化</strong>，规模巨大。</p><p>但姬玄看出本质：可转化为<strong>整数规划</strong>，用<strong>分支定界法</strong>求解。</p><p>他构建数学模型：
变量：x[i,d,s] = 1表示侍卫i在第d日值s班次
约束：线性等式/不等式
目标：最大化 Σ 满意度权重</p><p>然后分支定界搜索解空间。</p><p>这次用了一炷香，给出接近最优解。</p><p>楚王眼中已有赞许：“第三题&mldr;是月儿母亲留下的。”</p><p>他取出一卷竹简：“<strong>楚国千古难题——汉诺塔最少步数证明</strong>。”</p><p>汉诺塔问题：三根柱子，N个盘子从A移到C，每次只能移一个，且大盘不能在小盘上。</p><p>已知最少步数H(N) = 2^N - 1，但需要<strong>数学归纳法证明</strong>。</p><p>这不是算法题，是<strong>数学证明题</strong>。</p><p>姬玄接过竹简，沉思片刻，开始书写：</p><pre tabindex=0><code>证明：
1. 基础：N=1时，H(1)=1=2^1-1，成立。
2. 归纳假设：假设对N=k成立，即H(k)=2^k-1。
3. 对N=k+1：
   - 将前k个盘从A移到B（用C辅助），需H(k)步
   - 将第k+1个盘从A移到C，需1步
   - 将B上的k个盘移到C（用A辅助），需H(k)步
   - 总步数：H(k+1) = 2*H(k) + 1
              = 2*(2^k - 1) + 1
              = 2^(k+1) - 2 + 1
              = 2^(k+1) - 1
4. 由归纳法，对所有N成立。
</code></pre><p>写罢，呈上。</p><p>楚王看完，长叹一声：“月儿母亲当年，就是想证此题而心力耗尽&mldr;你竟如此轻松。”</p><p>他起身，走下王位，扶起姬玄：</p><p>“本王准了。楚齐联姻，三月后大婚。楚国出兵五万，助齐抗秦！”</p><p>殿内欢呼。</p><p>芈月泪流满面，与姬玄相视而笑。</p><hr><h2 id=尾声三军合围最终决战><strong>尾声：三军合围，最终决战</strong></h2><p>三月后，楚齐联军大破秦军于河西，嬴驷重伤逃回秦国。</p><p>魏国大梁被围，鬼谷子亲自守城，布下最终杀阵——“<strong>NP完全杀局</strong>”，号称无人可破。</p><p>但姬玄得楚国助力，又公开《九章算法》部分进阶篇，引来列国算法高手助阵。</p><p>最终决战前夜，姬玄与芈月在帐中。</p><p>“明日破阵，你有多少把握？”芈月问。
“五成。”姬玄诚实道，“鬼谷子的NP完全阵，本质是旅行商问题（TSP）的变种，要找哈密顿回路&mldr;那是NP-hard，没有多项式解法。”</p><p>“那如何破？”
“用<strong>近似算法</strong>，”姬玄眼中闪过精光，“找不到最优解，就找足够好的解。战争&mldr;本就是妥协的艺术。”</p><p>他握住芈月的手：“而且，这次有你在。”</p><p>芈月靠在他肩上：“等战争结束&mldr;”
“等结束，”姬玄轻声道，“我带你游遍中原，看尽算法奇观。”</p><p>帐外，星垂平野，大战将临。</p><p>而姬玄不知道的是&mldr;</p><p>鬼谷子站在大梁城头，遥望齐营，手中捏着一枚血色玉简。</p><p>玉简上浮现一行小字：</p><p>“姬玄，你以为赢了？真正的敌人&mldr;来自算法之外。”</p><p>“<strong>系统本身</strong>，即将觉醒。”</p><hr><p><strong>【下章预告】</strong>
<strong>第五章：系统觉醒，时空乱流</strong></p><p><strong>核心算法：P vs NP 终极之谜、近似算法极限、随机算法概率分析</strong></p><p><strong>关键冲突：天机系统突然具现化，要回收所有算法知识</strong></p><p><strong>感情考验：芈月被系统标记为“异常数据”，面临抹杀</strong></p><p><strong>最终抉择：姬玄必须在拯救爱人和保存算法文明间选择&mldr;</strong></p><hr><p><strong>【本章算法知识点】</strong></p><ol><li><strong>背包问题</strong>：0/1背包、多维约束、随机化版本</li><li><strong>最长公共子序列</strong>：动态规划经典，应用于密码破译</li><li><strong>状态压缩DP</strong>：用二进制表示状态，处理大规模组合问题</li><li><strong>最小费用最大流</strong>：SSA算法，Bellman-Ford找增广路</li><li><strong>约束满足与整数规划</strong>：分支定界法</li><li><strong>汉诺塔与数学归纳法</strong>：经典递归问题的数学证明</li><li><strong>NP完全问题</strong>：旅行商问题（TSP）与近似算法</li></ol><p>（对应LeetCode：416分割等和子集、1143最长公共子序列、134加油站、473火柴拼正方形等&mldr;）</p><ul><li><a href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E8%A7%89%E9%86%92%E6%97%B6%E7%A9%BA%E4%B9%B1%E6%B5%81/>第五章-系统觉醒，时空乱流</a></li><li><a href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A3%8B%E8%B0%B1%E7%AF%87/>◀ 返回</a></li></ul></div><div class="post__tags tags clearfix"><svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373.0-.74-.24-1-.5L1 8A2.853 2.853.0 01.3 7C.113 6.55.0 5.973.0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034.0 1.4.0h4.2c.373.0.95.113 1.4.3s.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5.0 100-3 1.5 1.5.0 000 3z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%88%97%E8%A1%A8/ rel=tag>列表</a></li></ul></div></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="wu guojun avatar" src=/img/QR.png class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>关于 wu guojun</span></div><div class=authorbox__description>北京牛马，高级 CV工程狮</div></div><nav class="post-nav flex"><div class="post-nav__item post-nav__item--prev"><a class=post-nav__link href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%9B%BE%E8%AE%BA%E6%9D%80%E5%B1%80%E4%B8%B4%E6%B7%84%E9%A3%8E%E4%BA%91/ rel=prev><span class=post-nav__caption>«&#8201;上一篇</span><p class=post-nav__post-title>第三章：图论杀局，临淄风云</p></a></div><div class="post-nav__item post-nav__item--next"><a class=post-nav__link href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E8%A7%89%E9%86%92%E6%97%B6%E7%A9%BA%E4%B9%B1%E6%B5%81/ rel=next><span class=post-nav__caption>下一篇&#8201;»</span><p class=post-nav__post-title>第五章：系统觉醒，时空乱流</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/post/about/>个人简历-中文</a> | <a class=footer__link href=/post/about-en/>个人简历-英文</a></div><div class=footer__copyright>&copy; 2025 补漏砖匠.
<span class=footer__copyright-credits><a href=# rel="nofollow noopener" target=_blank>左键右鼠运阴阳，挖山填海码几行。</a> <a href=# rel="nofollow noopener" target=_blank>人海浮沉皆过客，我是人间补漏匠。</a></span></div></div></footer></div><script async defer src=/js/menu.js></script><script src=/js/quiz.js></script><script src=/js/ai-quiz.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>