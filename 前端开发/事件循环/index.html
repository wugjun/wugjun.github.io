<!doctype html><html class=no-js lang=zh-cn><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>画卷篇</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="前端开发画卷篇汇总"><meta name=generator content="Hugo 0.152.2"><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/quiz.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title=补漏砖匠 rel=home><div class=logo__title>补漏砖匠</div><div class=logo__tagline>独钓寒江雪，为有暗香来。</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-%E5%89%91%E6%B3%95%E7%AF%87/>编程语言</a></li><li class=menu__item><a class=menu__link href=/%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2/%E8%BF%90%E7%BB%B4%E9%83%A8%E7%BD%B2-%E6%9C%BA%E5%85%B3%E7%AF%87/>运维部署</a></li><li class=menu__item><a class=menu__link href=/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E6%A3%8B%E8%B0%B1%E7%AF%87/>算法数据结构</a></li><li class=menu__item><a class=menu__link href=/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84-%E5%85%B5%E6%B3%95%E7%AF%87/>后端架构</a></li><li class=menu__item><a class=menu__link href=/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87-%E6%B3%95%E5%AE%9D%E7%AF%87/>工具效率</a></li><li class=menu__item><a class=menu__link href=/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E7%94%BB%E5%8D%B7%E7%AF%87/>前端开发</a></li><li class=menu__item><a class=menu__link href=/%E5%BC%80%E6%BA%90%E6%96%87%E6%A1%A3/%E5%BC%80%E6%BA%90%E6%96%87%E6%A1%A3-%E5%85%B8%E7%B1%8D%E7%AF%87/>开源文档</a></li><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-AI%E5%9C%A8%E7%BA%BF%E6%B5%8B%E8%AF%95/>JAVA在线测试</a></li><li class=menu__item><a class=menu__link href=/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80-%E5%9C%A8%E7%BA%BF%E7%AD%94%E9%A2%98%E7%A4%BA%E4%BE%8B/>在线答题</a></li><li class=menu__item><a class=menu__link href=/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87/%E5%B7%A5%E5%85%B7%E6%95%88%E7%8E%87-DeepSeek%E6%B5%81%E5%BC%8F%E8%81%8A%E5%A4%A9/>DeepSeek</a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>画卷篇</h1><p class=post__lead>以代码为笔，绘用户界面之韵</p><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16s8-3.6 8-8.0000003c0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4s6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8L11.36 11.36l.64-1.04-3.6-2.1600003z"/></svg>
<time class=meta__text datetime=2021-12-21T00:00:00>December 21, 2021</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg>
<span class=meta__text><a class=meta__link href=/categories/%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91 rel=category>前端开发</a></span></div></div></header><div class="content post__content clearfix"><h1 id=事件循环>事件循环</h1><h2 id=浏览器有哪些进程和线程>浏览器有哪些进程和线程</h2><ol><li>浏览器进程: 主要负责界面显示、用户交互、子进程管理等。浏览器进程内部会启动多个线程处理不同的任务。</li><li>网络进程: 负责加载网络资源，网络进程内部会启动多个线程处理不同的网络任务</li><li>渲染进程：一个标签页一个进程，渲染进程启动后，会开启一个渲染主线程，主线程负责执行 html、css、js 代码，默认情况下浏览器会为每个标签页开启一个新的渲染进程，以保证不同标签页之间互不影响。</li></ol><h2 id=渲染主线程是如何工作的>渲染主线程是如何工作的</h2><ul><li>解析 html</li><li>解析 css</li><li>计算样式</li><li>布局</li><li>处理图层</li><li>每秒把页面画 60 次</li><li>执行全局 js 代码</li><li>执行事件处理函数</li><li>执行计时器的回调函数</li></ul><h2 id=排队>排队</h2><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE1.png alt=渲染主线程></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>  1. 最开始的时候渲染主线程会进入一个无限循环
</span></span><span style=display:flex><span>  2. 每一次循环会检查消息对列中是否存有任务存在，如果有，就获取第一个任务执行，执行完一个后进入下一个循环；如果没有，则进入休眠状态
</span></span><span style=display:flex><span>  3. 其他线程（包括其他进程的线程）可以随时向消息队列添加任务。新任务会加到消息队列的末尾。在添加新任务时，如果主线程是休眠状态，则会将其唤醒以继续循环拿取任务。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  这样任务就有条不紊，持续执行下去，整个过程称之为事件循环（消息循环）
</span></span></code></pre></div><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE2.png alt=代码></p><h2 id=何为异步>何为异步</h2><p>执行代码中，会遇到一些无法立即处理的任务，比如：</p><ul><li>计时完成后需要执行任务：setTimeout、setInterval</li><li>网络通信完成后需要执行任务：XHR、 Fetch</li><li>用户操作后需要执行的任务： addEventListener
如果让主线程等待这些任务的时机到达，就会导致主线程长期处于<code>阻塞</code>状态，从而导致浏览其卡死。</li></ul><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE3.png alt=异步任务>
渲染主线程承担着机器重要的工作，无论如何不能阻塞</p><p>因此浏览器选择异步任务来解决问题
<img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE4.png alt=image></p><p>使用异步的方式，渲染主线程用不阻塞</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Q:如何理解 JS 的异步？</span>
</span></span><span style=display:flex><span>A<span style=color:#960050;background-color:#1e0010>：</span>js 是一门单线程的语言<span style=color:#960050;background-color:#1e0010>，</span>这是因为它运行在浏览其的渲染主线程中<span style=color:#960050;background-color:#1e0010>，</span>而渲染主线程只有一个<span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span>渲染主线程承担着诸多的工作<span style=color:#960050;background-color:#1e0010>，</span>渲染页面<span style=color:#960050;background-color:#1e0010>、</span>执行 js 代码都在其中运行<span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span>如果使用同步的方式<span style=color:#960050;background-color:#1e0010>，</span>就有可能导致主线程阻塞<span style=color:#960050;background-color:#1e0010>，</span>从而导致消息队列中的很多其他任务无法得到执行<span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span>这样一来<span style=color:#960050;background-color:#1e0010>，</span>一方面导致繁忙的主线程任务白白消耗时间<span style=color:#960050;background-color:#1e0010>，</span>另一个方面无法及时更新<span style=color:#960050;background-color:#1e0010>，</span>给用户造成卡死现象<span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span>所以浏览器采用异步的方式来避免<span style=color:#960050;background-color:#1e0010>，</span>具体的做法是当某些任务发生是<span style=color:#960050;background-color:#1e0010>，</span>比如计时器<span style=color:#960050;background-color:#1e0010>、</span>网络<span style=color:#960050;background-color:#1e0010>、</span>事件监听,
</span></span><span style=display:flex><span>主线程江南任务交给其他线程去处理<span style=color:#960050;background-color:#1e0010>，</span>自身立即结束任务执行<span style=color:#960050;background-color:#1e0010>，</span>转而执行后续代码<span style=color:#960050;background-color:#1e0010>，</span>
</span></span><span style=display:flex><span>当其他线程完成是将事先传递的回调函数包装程任务<span style=color:#960050;background-color:#1e0010>，</span>
</span></span><span style=display:flex><span>加入到消息队列的末尾<span style=color:#960050;background-color:#1e0010>，</span>等待主线程调度执行<span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span>在这种异步模式下<span style=color:#960050;background-color:#1e0010>，</span>浏览器永不阻塞<span style=color:#960050;background-color:#1e0010>，</span>从而最大限度的保证了单线程的流畅执行
</span></span></code></pre></div><h2 id=js-为何会阻塞渲染>js 为何会阻塞渲染</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>body</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>run</span> <span style=color:#a6e22e>block</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>change</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>h1</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;h1&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>btn</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;button&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//死循环指定的时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>delay</span>(<span style=color:#a6e22e>duration</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>start</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (Date.<span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>start</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>duration</span>) { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>btn</span>.<span style=color:#a6e22e>onclick</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>h1</span>.<span style=color:#a6e22e>textContent</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blocking&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>3000</span>);
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/script&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/body&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/html&gt;</span>
</span></span></code></pre></div><h2 id=任务有优先级吗>任务有优先级吗</h2><p>任务没优先级，消息队列有 FIFO
根据 W3C 解释：</p><ul><li>每个任务都有一个任务类型，同一个任务类型的任务必须在一个队列，不同的任务类型可以分属于不同的队列，在一次事件循环中，浏览器可以根据实际情况从不同的队列中取出任务。</li><li>浏览器必须准备好一个微队列 <code>microtask</code>,微队列优先所有的其他任务执行。
在目前 chrome 的实现中，至少包含下面的队列：</li><li>延迟队列：用户存放计时器到达后的回调任务，优先级中</li><li>交互队列：用于存放用户操作后产生的事件处理任务，优先级高</li><li>微队列：用于存放需要最快的任务，优先级最高<blockquote><p>添加任务到微队列的主要方式是使用 Promise、MutationObserver
eg：</p></blockquote></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>a</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  Promise.<span style=color:#a6e22e>resolve</span>().<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>      Promise.<span style=color:#a6e22e>resolve</span>().<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>a</span>);
</span></span><span style=display:flex><span>    }, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  Promise.<span style=color:#a6e22e>resolve</span>().<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#ae81ff>5</span>);
</span></span></code></pre></div><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE5.png alt=image>
浏览器还有其他的队列</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Q:阐述一下 JS 的事件循环</span>
</span></span><span style=display:flex><span>A: 事件循环又称称之消息循环，是浏览器渲染主线程的工作方式。
</span></span><span style=display:flex><span>在 chrome 的源码中，它开启一个不会结束的 <span style=color:#66d9ef>for</span> 循环，每次从循环队列中取出第一个任务执行，
</span></span><span style=display:flex><span>而其他线程只需要在合适的时候，将任务加入到队列末尾即可。
</span></span><span style=display:flex><span>过去把消息队列分为宏队列和微队列，这种说法目前已无法满足复杂的浏览器环境，
</span></span><span style=display:flex><span>取而代之的是一种更加灵活多变的处理方式。
</span></span><span style=display:flex><span>根据 w3c 官方的解释，每个任务有不同的类型，同类型的任务必须在同一个队列，
</span></span><span style=display:flex><span>不同的任务可以属于下同的队列，不同的任务有不同的优先级，在一次事件循环中，
</span></span><span style=display:flex><span>由浏览器自行决定取哪个队列的任务。但浏览器必须有一个微队列，
</span></span><span style=display:flex><span>微队列的任务一定具有最高的优先级，必须优先调用。
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>body</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;begin&#34;</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>开始</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;interaction&#34;</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>添加交互任务</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>delay</span>(<span style=color:#a6e22e>duration</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>start</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (Date.<span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#a6e22e>start</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>duration</span>) { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>addDelay</span>() {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;添加延时队列&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>setTimeout</span>(() =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;延迟队列执行&#39;</span>)
</span></span><span style=display:flex><span>            }, <span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>2000</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>addInteraction</span>() {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;添加交互队列&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>interaction</span>.<span style=color:#a6e22e>onclick</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;交互队列执行&#39;</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>2000</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>2000</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>begin</span>.<span style=color:#a6e22e>onclick</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>addDelay</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>addInteraction</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;=======&#39;</span>);
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/script&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/body&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/html&gt;</span>
</span></span></code></pre></div><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE5.png alt=image></p><h2 id=渲染流水线>渲染流水线</h2><p><img src=/images/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%9B%BE6.png alt=image></p></div><div class="post__tags tags clearfix"><svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373.0-.74-.24-1-.5L1 8A2.853 2.853.0 01.3 7C.113 6.55.0 5.973.0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034.0 1.4.0h4.2c.373.0.95.113 1.4.3s.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5.0 100-3 1.5 1.5.0 000 3z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/even-loop/ rel=tag>even loop</a></li></ul></div></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="wu guojun avatar" src=/img/QR.png class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>关于 wu guojun</span></div><div class=authorbox__description>北京牛马，高级 CV工程狮</div></div><nav class="post-nav flex"><div class="post-nav__item post-nav__item--next"><a class=post-nav__link href=/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E7%94%BB%E5%8D%B7%E7%AF%87/ rel=next><span class=post-nav__caption>下一篇&#8201;»</span><p class=post-nav__post-title>前端开发</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__links><a class=footer__link href=/post/about/>个人简历-中文</a> | <a class=footer__link href=/post/about-en/>个人简历-英文</a></div><div class=footer__copyright>&copy; 2025 补漏砖匠.
<span class=footer__copyright-credits><a href=# rel="nofollow noopener" target=_blank>左键右鼠运阴阳，挖山填海码几行。</a> <a href=# rel="nofollow noopener" target=_blank>人海浮沉皆过客，我是人间补漏匠。</a></span></div></div></footer></div><script async defer src=/js/menu.js></script><script src=/js/quiz.js></script><script src=/js/ai-quiz.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>