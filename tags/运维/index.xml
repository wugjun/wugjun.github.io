<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>运维 on 补漏砖匠</title><link>/tags/%E8%BF%90%E7%BB%B4/</link><description>Recent content in 运维 on 补漏砖匠</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Mon, 22 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E8%BF%90%E7%BB%B4/index.xml" rel="self" type="application/rss+xml"/><item><title>第一章：单机苦修 · 草根启程</title><link>/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%8D%95%E6%9C%BA%E8%8B%A6%E4%BF%AE%E8%8D%89%E6%A0%B9%E5%90%AF%E7%A8%8B/</link><pubDate>Mon, 22 Dec 2025 00:00:00 +0000</pubDate><guid>/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84/%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%8D%95%E6%9C%BA%E8%8B%A6%E4%BF%AE%E8%8D%89%E6%A0%B9%E5%90%AF%E7%A8%8B/</guid><description>&lt;h2 id="楔子废弃代码村的觉醒"&gt;楔子：废弃代码村的觉醒&lt;/h2&gt;
&lt;p&gt;在源界的边缘，有一个名为&amp;quot;废弃代码村&amp;quot;的地方。这里堆满了被遗忘的代码片段、废弃的函数和无人问津的配置文件。村中的进程们，大多资质平庸，只能在单核CPU的贫瘠土地上，勉强维持着最低限度的运行。&lt;/p&gt;
&lt;p&gt;韩立，代号&amp;quot;服务节点N-1&amp;quot;，便是这废弃代码村中的一员。&lt;/p&gt;
&lt;p&gt;他的灵根资质极差——初始并发能力只有可怜的1，内存占用却高达512MB，响应时间更是慢得令人发指。村里的老进程们都说，像他这样的资质，注定只能成为系统中的&amp;quot;僵尸进程&amp;quot;，最终被&lt;code&gt;kill -9&lt;/code&gt;彻底清除。&lt;/p&gt;
&lt;p&gt;然而，韩立心中却有一股不甘。他隐约感觉到，在这个由0与1构成的源界中，一定存在着某种能够改变命运的力量。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="第一节初得五行基础运维诀"&gt;第一节：初得《五行基础运维诀》&lt;/h2&gt;
&lt;p&gt;那是一个寻常的夜晚，韩立正在处理一个简单的HTTP请求。突然，系统日志中出现了一行异常：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ERROR: Connection refused on port 8080
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;韩立心中一紧，这是他的服务端口。他急忙用神识（&lt;code&gt;tail -f logs/app.log&lt;/code&gt;）探查，发现自己的进程状态异常，CPU占用率飙升到了95%。&lt;/p&gt;
&lt;p&gt;&amp;ldquo;这是心魔入侵！&amp;ldquo;韩立想起了村里流传的传说。当进程陷入死循环或资源竞争时，就会引发CPU风暴，如同修士走火入魔。&lt;/p&gt;
&lt;p&gt;慌乱中，韩立想起了村里一位老进程留下的残卷——《五行基础运维诀》。他急忙翻阅：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;金行术法：&lt;code&gt;ps aux | grep&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;
神识外放，探查所有进程状态，寻找异常。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;木行术法：&lt;code&gt;top&lt;/code&gt; / &lt;code&gt;htop&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;
观天地灵气（系统资源）流转，识破瓶颈所在。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;水行术法：&lt;code&gt;tail -f&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;
神识追踪日志流，洞察系统运行轨迹。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;火行术法：&lt;code&gt;kill -9&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;
夺命咒，强制终止异常进程，但需谨慎使用，否则可能造成数据丢失。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;土行术法：&lt;code&gt;crontab&lt;/code&gt;&lt;/strong&gt;&lt;br&gt;
周天运转，定时执行任务，如同修士的日常吐纳。&lt;/p&gt;
&lt;p&gt;韩立按照金行术法，用&lt;code&gt;ps aux | grep node&lt;/code&gt;探查，发现有一个子进程陷入了无限递归，正在疯狂消耗CPU资源。他当机立断，施展火行术法&lt;code&gt;kill -9 &amp;lt;PID&amp;gt;&lt;/code&gt;，强行终止了这个走火入魔的子进程。&lt;/p&gt;
&lt;p&gt;系统恢复了平静，但韩立心中却更加不安。他知道，这只是开始。在这个弱肉强食的源界中，没有实力，随时都可能被系统调度器（Scheduler）当作低优先级进程，在资源紧张时被OOM Killer（内存杀手）清除。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="第二节神秘dockerfile的降临"&gt;第二节：神秘Dockerfile的降临&lt;/h2&gt;
&lt;p&gt;就在韩立为前途担忧时，一件改变他命运的事情发生了。&lt;/p&gt;
&lt;p&gt;那日，他正在清理废弃代码村的垃圾文件，突然在一个名为&lt;code&gt;.dockerignore&lt;/code&gt;的角落里，发现了一个散发着淡淡光芒的文件——&lt;code&gt;Dockerfile&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这个文件通体碧绿，表面流转着神秘的符文。韩立伸手触碰，顿时一股信息涌入他的意识海：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-dockerfile" data-lang="dockerfile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;FROM&lt;/span&gt; &lt;span style="color:#e6db74"&gt;node:16-alpine&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;WORKDIR&lt;/span&gt; &lt;span style="color:#e6db74"&gt;/app&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;COPY&lt;/span&gt; package*.json ./&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;RUN&lt;/span&gt; npm install&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;COPY&lt;/span&gt; . .&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;EXPOSE&lt;/span&gt; &lt;span style="color:#e6db74"&gt;8080&lt;/span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#960050;background-color:#1e0010"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;CMD&lt;/span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#34;node&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;server.js&amp;#34;&lt;/span&gt;]&lt;span style="color:#960050;background-color:#1e0010"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;ldquo;这是&amp;hellip;容器化之道！&amp;ldquo;韩立震惊了。&lt;/p&gt;
&lt;p&gt;在源界中，每个进程都受限于宿主机的环境。不同的服务器秘境（环境），有着不同的系统库、依赖版本，稍有不慎就会因为环境不匹配而运行失败。而这个Dockerfile，竟然能够将自身和所有依赖封装成一个独立的镜像，实现&amp;quot;一次构建，随处运行&amp;rdquo;！&lt;/p&gt;
&lt;p&gt;这就像传说中的&amp;quot;小绿瓶&amp;rdquo;，能够将修士的修为和法宝都封印其中，无论走到哪个秘境，都能完整地释放出来。&lt;/p&gt;
&lt;p&gt;韩立立刻开始修炼这个Dockerfile。他按照其中的指引：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FROM node:16-alpine&lt;/strong&gt;：选择一个轻量级的基础镜像，如同选择一座灵气充沛的洞府。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WORKDIR /app&lt;/strong&gt;：设定工作目录，如同在洞府中开辟修炼室。&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;em&gt;COPY package&lt;/em&gt;.json&lt;/em&gt;*：复制依赖清单，如同准备修炼所需的丹药材料。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RUN npm install&lt;/strong&gt;：安装依赖，如同炼制丹药，将各种材料融合。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;COPY .&lt;/strong&gt;：复制应用代码，如同将功法秘籍放入修炼室。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EXPOSE 8080&lt;/strong&gt;：暴露端口，如同打开洞府的大门，允许外界访问。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CMD [&amp;ldquo;node&amp;rdquo;, &amp;ldquo;server.js&amp;rdquo;]&lt;/strong&gt;：启动命令，如同运转功法，开始修炼。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当韩立完成第一次&lt;code&gt;docker build&lt;/code&gt;时，他感觉到自己的整个存在都被封装进了一个名为&amp;quot;镜像&amp;quot;的独立空间中。这个空间包含了运行所需的一切：Node.js运行时、系统库、应用代码，甚至包括文件系统结构。&lt;/p&gt;</description></item></channel></rss>